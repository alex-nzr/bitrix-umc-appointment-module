this.BX=this.BX||{},this.BX.FirstBit=this.BX.FirstBit||{},function(e,t,a){"use strict";var o={"appointment-popup-overlay":"app_appointment-popup-overlay__Wno-g","appointment-warning-text":"app_appointment-warning-text__s-Od7","appointment-form":"app_appointment-form__rPVyI",loading:"app_loading__svaGP","default-loader-wrapper":"app_default-loader-wrapper__U0L4b","default-loader-circular":"app_default-loader-circular__vTOun","loader-rotate":"app_loader-rotate__lk8Hp","default-loader-path":"app_default-loader-path__Yksuc","loader-dash":"app_loader-dash__BL3Xy",off:"app_off__-q-J-","appointment-result-block":"app_appointment-result-block__CEjD5","appointment-form-confirmation-mode":"app_appointment-form-confirmation-mode__4Y5Iq","selection-block":"app_selection-block__jPMo8","appointment-form_input-wrapper":"app_appointment-form_input-wrapper__gmnZQ","appointment-form-button-wrapper":"app_appointment-form-button-wrapper__DOAlv","appointment-form-close":"app_appointment-form-close__qzv0-",active:"app_active__vW0S6",error:"app_error__JtV2y",hidden:"app_hidden__MT-zb","selection-item-selected":"app_selection-item-selected__J4EWB","selection-item-list":"app_selection-item-list__MofBn","column-mode":"app_column-mode__hghAT","horizontal-scroll-buttons":"app_horizontal-scroll-buttons__WX-1p","appointment-form_input":"app_appointment-form_input__KdGOL","empty-selection-message":"app_empty-selection-message__M-Reh","appointment-form_textarea":"app_appointment-form_textarea__4--nv","appointment-form-message":"app_appointment-form-message__CmKRf","appointment-form-button":"app_appointment-form-button__V605q",rotating:"app_rotating__ur-7t","appointment-form-confirmation-wrapper":"app_appointment-form-confirmation-wrapper__2dQj-","appointment-form-button-link":"app_appointment-form-button-link__33Kwz","appointment-info-message":"app_appointment-info-message__c-Afe",success:"app_success__8u0SY","appointment-button-wrapper":"app_appointment-button-wrapper__MilBW","appointment-button":"app_appointment-button__vAbo4",appointmentPulse:"app_appointmentPulse__j9AYC"};function n(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);if(t){var a=parseInt(t[1],16),o=parseInt(t[2],16),n=parseInt(t[3],16);a/=255,o/=255,n/=255;var i,p=Math.max(a,o,n),r=Math.min(a,o,n),s=0,l=(p+r)/2;if(p===r)s=i=0;else{var c=p-r;switch(i=l>.5?c/(2-p-r):c/(p+r),p){case a:s=(o-n)/c+(o<n?6:0);break;case o:s=(n-a)/c+2;break;case n:s=(a-o)/c+4}s/=6}return i*=100,i=Math.round(i),l*=100,l=Math.round(l),{h:s=Math.round(360*s),s:"".concat(i,"%"),l:"".concat(l,"%")}}return null}!function(e,t){void 0===t&&(t={});var a=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===a&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}("@import url(\"https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap\");body{margin:0;padding:0}.app_appointment-popup-overlay__Wno-g{--main-h:205;--main-s:98%;--main-l:32%;--field-h:217;--field-s:53%;--field-l:22%;--appointment-main-color:hsl(var(--main-h),var(--main-s),var(--main-l));--appointment-field-color:hsl(var(--field-h),var(--field-s),var(--field-l));--appointment-field-hover-color:hsl(var(--field-h),var(--field-s),calc(var(--field-l) + 10%));--appointment-plate-color:hsl(var(--main-h),calc(var(--main-s) - 50%),var(--main-l));--appointment-form-text-color:#f5f5f5;--appointment-btn-bg-color:#12b1e3;--appointment-btn-text-color:#fff;--appointment-start-btn-text-color:#fff;--appointment-start-btn-bg-color:#025ea1;align-items:flex-start;background:rgba(0,0,0,.5);bottom:0;display:flex;height:100vh;justify-content:center;left:0;opacity:0;overflow:auto;position:fixed;right:0;top:0;transition:opacity .3s;width:100vw}.app_appointment-popup-overlay__Wno-g,.app_appointment-popup-overlay__Wno-g *{box-sizing:border-box;color:var(--appointment-form-text-color);font-family:Roboto,sans-serif;font-size:12px;font-style:normal;font-weight:400;pointer-events:none;user-select:none}.app_appointment-popup-overlay__Wno-g ::-webkit-scrollbar,.app_appointment-popup-overlay__Wno-g::-webkit-scrollbar{background:transparent;border-radius:10px;width:2px}.app_appointment-popup-overlay__Wno-g ::-webkit-scrollbar-thumb,.app_appointment-popup-overlay__Wno-g::-webkit-scrollbar-thumb{background:var(--appointment-plate-color);border-radius:10px;width:2px}.app_appointment-popup-overlay__Wno-g li,.app_appointment-popup-overlay__Wno-g ol,.app_appointment-popup-overlay__Wno-g ul{list-style:none;padding:0}.app_appointment-popup-overlay__Wno-g button,.app_appointment-popup-overlay__Wno-g button:active,.app_appointment-popup-overlay__Wno-g button:focus,.app_appointment-popup-overlay__Wno-g input,.app_appointment-popup-overlay__Wno-g input:active,.app_appointment-popup-overlay__Wno-g input:focus,.app_appointment-popup-overlay__Wno-g textarea,.app_appointment-popup-overlay__Wno-g textarea:active,.app_appointment-popup-overlay__Wno-g textarea:focus{border:none;outline:none;resize:none}.app_appointment-popup-overlay__Wno-g a,.app_appointment-popup-overlay__Wno-g a:focus,.app_appointment-popup-overlay__Wno-g a:hover{outline:none;text-decoration:none}.app_appointment-popup-overlay__Wno-g h1,.app_appointment-popup-overlay__Wno-g h2,.app_appointment-popup-overlay__Wno-g h3,.app_appointment-popup-overlay__Wno-g h4,.app_appointment-popup-overlay__Wno-g h5,.app_appointment-popup-overlay__Wno-g h6,.app_appointment-popup-overlay__Wno-g label,.app_appointment-popup-overlay__Wno-g p{margin:0;padding:0}.app_appointment-popup-overlay__Wno-g input[type=number]::-webkit-inner-spin-button,.app_appointment-popup-overlay__Wno-g input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.app_appointment-popup-overlay__Wno-g .app_appointment-warning-text__s-Od7{color:#ff4500;text-align:center}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI{align-items:center;background:var(--appointment-main-color);border-radius:6px;box-shadow:0 0 5px 1px var(--appointment-main-color);display:flex;flex-direction:column;margin-top:30px;max-width:600px;opacity:0;overflow:hidden;padding:20px 10px;position:relative;transform:translateY(-110vh);transform-origin:left bottom;transition:.5s;width:100%;z-index:1000}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_loading__svaGP:before{background:hsla(0,0%,100%,.5);content:\"\";filter:blur(2px);height:100%;left:0;position:absolute;top:0;width:100%;z-index:2}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_loading__svaGP .app_default-loader-wrapper__U0L4b{height:100px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%);width:100px}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_loading__svaGP .app_default-loader-wrapper__U0L4b .app_default-loader-circular__vTOun{animation:app_loader-rotate__lk8Hp 2s linear infinite;bottom:0;display:block;left:0;position:absolute;right:0;top:0;transform-origin:center center;z-index:3}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_loading__svaGP .app_default-loader-wrapper__U0L4b .app_default-loader-path__Yksuc{stroke:#bfc3c8;stroke-width:2.5;stroke-dasharray:20,200;stroke-dashoffset:0;stroke-linecap:round;animation:app_loader-dash__BL3Xy 1.5s ease-in-out infinite}@keyframes app_loader-rotate__lk8Hp{to{transform:rotate(1turn)}}@keyframes app_loader-dash__BL3Xy{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35px}to{stroke-dasharray:89,200;stroke-dashoffset:-124px}}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_off__-q-J->:not(#app_appointment-result-block__CEjD5){opacity:0;pointer-events:none}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_appointment-form-confirmation-mode__4Y5Iq{transform:translateY(30vh)}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_appointment-form-confirmation-mode__4Y5Iq>.app_appointment-form-button-wrapper__DOAlv,.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_appointment-form-confirmation-mode__4Y5Iq>.app_appointment-form_input-wrapper__gmnZQ,.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_appointment-form-confirmation-mode__4Y5Iq>.app_default-loader-circular__vTOun,.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI.app_appointment-form-confirmation-mode__4Y5Iq>.app_selection-block__jPMo8{display:none}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI ::placeholder{color:var(--appointment-form-text-color)}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI #app_appointment-form-close__qzv0-,.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI .app_default-loader-circular__vTOun{display:none}.app_appointment-popup-overlay__Wno-g.app_active__vW0S6{opacity:1}.app_appointment-popup-overlay__Wno-g.app_active__vW0S6,.app_appointment-popup-overlay__Wno-g.app_active__vW0S6 *{pointer-events:auto}.app_appointment-popup-overlay__Wno-g.app_active__vW0S6 #app_appointment-form__rPVyI{opacity:1;transform:translateY(0)}.app_appointment-popup-overlay__Wno-g .app_appointment-form_input-wrapper__gmnZQ,.app_appointment-popup-overlay__Wno-g .app_selection-block__jPMo8{background-color:var(--appointment-field-color);border-radius:6px;cursor:pointer;display:block;margin-bottom:15px;max-height:300px;position:relative;transition:.5s;width:100%}.app_appointment-popup-overlay__Wno-g .app_appointment-form_input-wrapper__gmnZQ.app_error__JtV2y,.app_appointment-popup-overlay__Wno-g .app_selection-block__jPMo8.app_error__JtV2y{box-shadow:inset 0 0 0 2px red}.app_appointment-popup-overlay__Wno-g .app_appointment-form_input-wrapper__gmnZQ.app_hidden__MT-zb,.app_appointment-popup-overlay__Wno-g .app_selection-block__jPMo8.app_hidden__MT-zb{margin-bottom:0;max-height:0;transform:scaleY(0);transform-origin:center top}.app_appointment-popup-overlay__Wno-g .app_selection-item-selected__J4EWB{align-items:center;border-radius:6px;display:flex;height:36px;justify-content:flex-start;padding:0 25px 0 15px;position:relative;transition:.3s;width:100%}.app_appointment-popup-overlay__Wno-g .app_selection-item-selected__J4EWB:hover{background-color:var(--appointment-field-hover-color)}.app_appointment-popup-overlay__Wno-g .app_selection-item-selected__J4EWB:before{content:\"\\25BC\";cursor:pointer;height:10px;position:absolute;right:20px;top:50%;transform:translateY(-50%);width:10px}.app_appointment-popup-overlay__Wno-g .app_selection-item-selected__J4EWB span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn{align-items:stretch;border-radius:0 0 6px 6px;display:flex;flex-wrap:wrap;justify-content:flex-start;margin:0;max-height:0;overflow:hidden;padding:0;transition:.5s}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT{align-items:flex-start;display:flex;flex-wrap:nowrap;justify-content:flex-start;overflow:auto}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT::-webkit-scrollbar{height:0}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT.app_active__vW0S6{max-height:240px}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT.app_active__vW0S6 .app_horizontal-scroll-buttons__WX-1p{opacity:1}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT.app_active__vW0S6 .app_horizontal-scroll-buttons__WX-1p button{pointer-events:auto}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT>li{background:transparent;flex:0 0 33.33333%;flex-direction:column;height:100%;justify-content:flex-start;margin:0;padding-top:0;text-align:center}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT>li:hover{background-color:transparent}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT>li p{background-color:var(--appointment-field-color);color:var(--appointment-form-text-color);font-weight:600;left:0;position:sticky;top:0;white-space:nowrap;width:100%}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT>li p:last-of-type{margin-bottom:5px}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT>li span{background:var(--appointment-plate-color);border-radius:5px;margin:3px auto;padding:5px;scroll-snap-align:start;transition:.3s;width:100%}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT>li span:hover{background:var(--appointment-field-hover-color)}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT .app_horizontal-scroll-buttons__WX-1p{bottom:calc(50% - 15px);display:flex;justify-content:space-between;left:-10px;opacity:0;pointer-events:none;position:absolute;transition:.3s;width:calc(100% + 20px)}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_column-mode__hghAT .app_horizontal-scroll-buttons__WX-1p button{align-items:center;background:var(--appointment-btn-bg-color);border-radius:5px;color:#000;cursor:pointer;display:flex;font-size:22px;font-weight:600;height:30px;justify-content:center;overflow:hidden;width:20px}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn.app_active__vW0S6{max-height:170px;overflow:auto}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn li{align-items:center;background:var(--appointment-plate-color);border-radius:6px;cursor:pointer;display:flex;flex:1 0 calc(33.33333% - 4px);height:auto;justify-content:space-between;margin:2px;min-height:36px;padding:5px 15px;transition:.3s;user-select:none;width:100%}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn li:hover{background-color:var(--appointment-field-hover-color)}.app_appointment-popup-overlay__Wno-g .app_selection-item-list__MofBn li span{font-weight:600}.app_appointment-popup-overlay__Wno-g .app_appointment-form_input__KdGOL{align-items:center;background:transparent;border-radius:6px;cursor:auto;display:flex;height:36px;justify-content:space-between;padding:0 15px;transition:.3s;user-select:none;width:100%}.app_appointment-popup-overlay__Wno-g .app_empty-selection-message__M-Reh{display:block;padding:0 15px 5px;pointer-events:none}.app_appointment-popup-overlay__Wno-g .app_appointment-form_textarea__4--nv{background:transparent;border-radius:6px;height:100px;padding:5px 15px;transition:.3s;width:100%}.app_appointment-popup-overlay__Wno-g #app_appointment-form-message__CmKRf{color:#ff4500;font-size:14px;margin-bottom:15px;text-align:center}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button-wrapper__DOAlv{position:relative}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button__V605q{align-items:center;background:var(--appointment-btn-bg-color);border:1px solid var(--appointment-btn-bg-color);border-radius:6px;color:var(--appointment-btn-text-color);cursor:pointer;display:flex;font-weight:500;height:36px;justify-content:center;margin:0 auto;min-width:100px;padding:0 15px;position:relative;text-transform:none;transition:.3s;user-select:none}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button__V605q:hover{color:var(--appointment-btn-text-color);opacity:.7}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button__V605q:before{animation:app_rotating__ur-7t 1s linear infinite;background:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='512' height='512' viewBox='0 0 399.389 399.389' style='enable-background:new 0 0 512 512' xml:space='preserve'%3E%3Cpath d='M340.896 58.489C303.18 20.773 253.031.001 199.693.001c-53.34 0-103.487 20.771-141.204 58.488C20.772 96.207 0 146.355 0 199.694c0 53.34 20.772 103.489 58.49 141.206 37.717 37.717 87.864 58.488 141.204 58.488 53.339 0 103.486-20.771 141.205-58.488 37.717-37.717 58.49-87.865 58.49-141.206-.002-53.339-20.776-103.487-58.493-141.205zm-12.835 12.837c34.289 34.289 53.172 79.878 53.172 128.368h-41.148c0-77.412-62.979-140.391-140.391-140.391-4.593 0-9.134.229-13.615.662v-41.31c4.508-.332 9.049-.5 13.615-.5 48.49 0 94.077 18.883 128.367 53.171zM199.693 321.931c-67.401 0-122.236-54.835-122.236-122.236S132.292 77.458 199.693 77.458 321.93 132.293 321.93 199.694s-54.836 122.237-122.237 122.237z' fill='%23fff' data-original='%23000000' xmlns='http://www.w3.org/2000/svg'/%3E%3C/svg%3E\") 50%/contain no-repeat;content:\"\";height:20px;left:50%;opacity:0;pointer-events:none;position:absolute;top:50%;transform:translate(-50%,-50%);transition:.2s;width:20px}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button__V605q.app_loading__svaGP{color:transparent;pointer-events:none}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button__V605q.app_loading__svaGP:before{opacity:1}.app_appointment-popup-overlay__Wno-g #app_appointment-form-confirmation-wrapper__2dQj-{width:100%}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button-link__33Kwz{border-bottom:1px dashed var(--appointment-btn-bg-color);color:var(--appointment-btn-bg-color);display:block;margin:10px auto 0;max-width:max-content;text-decoration:none;transition:.3s}.app_appointment-popup-overlay__Wno-g .app_appointment-form-button-link__33Kwz:focus,.app_appointment-popup-overlay__Wno-g .app_appointment-form-button-link__33Kwz:hover,.app_appointment-popup-overlay__Wno-g .app_appointment-form-button-link__33Kwz:visited{opacity:.7}.app_appointment-popup-overlay__Wno-g .app_appointment-info-message__c-Afe{color:var(--appointment-btn-bg-color);padding-top:10px;text-align:center;user-select:none}.app_appointment-popup-overlay__Wno-g .app_appointment-info-message__c-Afe a{border-bottom:1px solid var(--appointment-btn-bg-color);color:var(--appointment-btn-bg-color);white-space:nowrap}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5{align-items:center;background:var(--appointment-main-color);display:flex;height:100%;justify-content:center;left:0;opacity:0;padding:20px;pointer-events:none;position:absolute;top:0;transition:.3s;width:100%}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5.app_active__vW0S6{opacity:1;pointer-events:auto}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5 p{color:var(--appointment-form-text-color);position:relative;text-align:center;width:100%}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5 p.app_error__JtV2y{font-size:17px;line-height:1.3}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5 p.app_success__8u0SY{font-size:13px}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5 p.app_success__8u0SY:before{align-items:center;border-radius:50%;color:var(--appointment-form-text-color);content:\"\\2714\";display:flex;font-size:40px;height:50px;justify-content:center;left:50%;line-height:1;pointer-events:none;position:absolute;text-align:center;top:-60px;transform:translate(-50%);transition:.2s;width:50px}.app_appointment-popup-overlay__Wno-g #app_appointment-result-block__CEjD5 p a{border-bottom:1px solid var(--appointment-btn-bg-color);color:var(--appointment-btn-bg-color)}@media (max-width:575px){.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI{border-radius:0;margin:0;min-height:100vh}}@keyframes app_rotating__ur-7t{0%{transform:translate(-50%,-50%) rotate(0)}to{transform:translate(-50%,-50%) rotate(1turn)}}.app_appointment-button-wrapper__MilBW{--main-h:205;--main-s:98%;--main-l:32%;--field-h:217;--field-s:53%;--field-l:22%;--appointment-main-color:hsl(var(--main-h),var(--main-s),var(--main-l));--appointment-field-color:hsl(var(--field-h),var(--field-s),var(--field-l));--appointment-field-hover-color:hsl(var(--field-h),var(--field-s),calc(var(--field-l) + 10%));--appointment-plate-color:hsl(var(--main-h),calc(var(--main-s) - 50%),var(--main-l));--appointment-form-text-color:#f5f5f5;--appointment-btn-bg-color:#12b1e3;--appointment-btn-text-color:#fff;--appointment-start-btn-text-color:#fff;--appointment-start-btn-bg-color:#025ea1;color:var(--appointment-form-text-color);font-family:Roboto,sans-serif;font-size:12px;font-style:normal;font-weight:400}.app_appointment-button-wrapper__MilBW.app_hidden__MT-zb{margin-bottom:0;max-height:0;transform:scaleY(0);transform-origin:center top}#app_appointment-button__vAbo4{--this-btn-br:6px;align-items:center;background:transparent;border:none;border-radius:var(--this-btn-br);bottom:20px;color:var(--appointment-start-btn-text-color);cursor:pointer;display:flex;font-size:14px;height:40px;justify-content:center;left:10px;outline:none;padding:0 15px;position:fixed;transition:.2s;width:auto;z-index:1005}#app_appointment-button__vAbo4:before{animation:app_appointmentPulse__j9AYC 1.5s linear infinite;z-index:0}#app_appointment-button__vAbo4:after,#app_appointment-button__vAbo4:before{background:var(--appointment-start-btn-bg-color);border-radius:var(--this-btn-br);content:\"\";cursor:pointer;height:100%;left:0;position:absolute;top:0;transition:.2s;width:100%}#app_appointment-button__vAbo4:after{align-items:center;display:flex;font-size:20px;justify-content:center;text-align:center;z-index:1}#app_appointment-button__vAbo4 span{font-weight:600;position:relative;z-index:2}#app_appointment-button__vAbo4.app_active__vW0S6:before{animation:none;opacity:0}#app_appointment-button__vAbo4.app_active__vW0S6:after{content:\"\\2716\"}#app_appointment-button__vAbo4.app_active__vW0S6 span{opacity:0}#app_appointment-button__vAbo4.app_success__8u0SY{pointer-events:none}#app_appointment-button__vAbo4.app_success__8u0SY:before{animation:none;opacity:0}#app_appointment-button__vAbo4.app_success__8u0SY:after{content:\"\\2714\";font-size:24px}#app_appointment-button__vAbo4.app_success__8u0SY span{opacity:0}@keyframes app_appointmentPulse__j9AYC{0%{opacity:1;transform:scaleX(1)}to{opacity:0;transform:scale3d(1.2,1.6,1.2)}}@media (max-width:767px){.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI{padding-top:50px}.app_appointment-popup-overlay__Wno-g #app_appointment-form__rPVyI #app_appointment-form-close__qzv0-{align-items:center;color:var(--appointment-form-text-color);cursor:pointer;display:flex;font-size:16px;font-weight:600;height:30px;justify-content:center;line-height:1;position:absolute;right:10px;top:10px;width:30px}#app_appointment-button__vAbo4.app_active__vW0S6{display:none}}");var i=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"bind",value:function(e,t,o,n){a.Event.bind(e,t,o,n)}}]),t}(a.Event.EventEmitter);babelHelpers.defineProperty(i,"fullDataLoaded","BX.FirstBit.Appointment:dataLoaded");var p=function(){function e(t,a){babelHelpers.classCallCheck(this,e),this.styles=t,this.application=a}return babelHelpers.createClass(e,[{key:"getAppHtmlSkeleton",value:function(){return BX.create("div",{attrs:{id:this.application.selectors.overlayId,className:this.styles["appointment-popup-overlay"]},children:[BX.create("form",{attrs:{id:this.application.selectors.formId,className:this.styles["appointment-form"]},children:[BX.create("span",{attrs:{id:this.styles["appointment-form-close"]},html:"&#10006;"})].concat(babelHelpers.toConsumableArray(this.getSelectionNodes()),babelHelpers.toConsumableArray(this.getTextNodes()),[BX.create("p",{attrs:{id:this.application.selectors.messageNodeId}}),BX.create("div",{attrs:{className:this.styles["appointment-form-button-wrapper"]},children:[BX.create("button",{attrs:{type:"submit",id:this.application.selectors.submitBtnId,className:this.styles["appointment-form-button"]},text:BX.message("FIRSTBIT_JS_FORM_BTN_TEXT")})]}),BX.create("p",{attrs:{className:this.styles["appointment-info-message"]},children:[BX.create("span",{text:"".concat(BX.message("FIRSTBIT_JS_FORM_CONFIRM_INFO_TEXT")," ")}),BX.create("a",{attrs:{href:this.application.initParams.privacyPageLink,target:"_blank"},text:BX.message("FIRSTBIT_JS_FORM_CONFIRM_INFO_LINK")})]}),BX.create("div",{attrs:{id:this.application.selectors.appResultBlockId},children:[BX.create("p",{text:""})]}),BX.create("div",{attrs:{className:this.styles["default-loader-wrapper"]},html:'<svg class="'.concat(this.styles["default-loader-circular"],'" viewBox="25 25 50 50">\n                                        <circle class="').concat(this.styles["default-loader-path"],'" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"></circle>\n                                    </svg>')})])})]})}},{key:"getSelectionNodes",value:function(){var e=this,t=[],a=function(a){if(!e.application.selectionBlocks.hasOwnProperty(a))return"continue";var o=BX.create("p",{attrs:{id:e.application.selectionBlocks[a].selectedId,className:e.styles["selection-item-selected"]},text:e.application.defaultText[a],events:{click:function(){return e.application.toggleSelectionList(a,o,n)}}}),n=BX.create("ul",{attrs:{id:e.application.selectionBlocks[a].listId,className:"".concat(e.styles["appointment-form_head_list"]," ").concat(e.styles["selection-item-list"])},text:e.application.defaultText[a]}),i=BX.create("input",{attrs:{id:e.application.selectionBlocks[a].inputId,name:e.application.selectionBlocks[a].inputId,type:"hidden"}});t.push(BX.create("div",{attrs:{id:e.application.selectionBlocks[a].blockId,className:"".concat(e.styles["selection-block"]," ").concat(a===e.application.dataKeys.clinicsKey?"":e.styles.hidden)},children:[o,n,i]}))};for(var o in this.application.selectionBlocks)a(o);return t}},{key:"getTextNodes",value:function(){var e=[];for(var t in this.application.initParams.textBlocks)this.application.initParams.textBlocks.hasOwnProperty(t)&&e.push(BX.create("label",{attrs:{className:this.styles["appointment-form_input-wrapper"]},children:[BX.create({tag:this.application.initParams.textBlocks[t].type?"input":"textarea",attrs:this.getTextInputAttrs(this.application.initParams.textBlocks[t])})]}));return e}},{key:"getTextInputAttrs",value:function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&("class"===a?t.className=this.styles[e[a]]:t[a]=e[a]);return t}},{key:"getDefaultStartBtn",value:function(){return BX.create("div",{attrs:{id:this.application.selectors.startBtnWrapId,className:this.styles["appointment-button-wrapper"]},children:[BX.create("button",{attrs:{id:this.application.selectors.startBtnId},children:[BX.create("span",{text:BX.message("FIRSTBIT_JS_START_BTN_TEXT")})]})]})}},{key:"getDivElement",value:function(e){return BX.create("div",{attrs:{id:e}})}},{key:"getConfirmationBlock",value:function(e){var t=this,a=BX.create("p",{attrs:{className:o["appointment-warning-text"]}}),n=BX.create("input",{attrs:{type:"number",className:this.styles["appointment-form_input"],placeholder:BX.message("FIRSTBIT_JS_CONFIRM_CODE_MESSAGE"),required:"true",autocomplete:"new-password"},events:{input:function(e){var t,a;(null===(t=e.target)||void 0===t||null===(a=t.value)||void 0===a?void 0:a.length)>4&&(e.target.value=e.target.value.substring(0,4))}}}),i=BX.create("div",{attrs:{className:o["appointment-form-button-wrapper"]},children:[BX.create("button",{attrs:{className:o["appointment-form-button"],type:"button"},text:BX.message("FIRSTBIT_JS_SEND_BTN_TEXT"),events:{click:function(i){n&&a&&(a.textContent="",n.value&&4===n.value.length?(t.application.form.classList.add(o.sending),t.application.verifyConfirmCode(n.value,e,a,i.target)):n.value&&4===n.value.length||(a.textContent=BX.message("FIRSTBIT_JS_CONFIRM_CODE_LENGTH")))}}})]}),p=BX.create("a",{attrs:{className:o["appointment-form-button-link"],href:"#"}}),r=BX.create("div",{attrs:{id:this.application.selectors.confirmWrapperId,style:"width: 100%"},children:[BX.create("label",{attrs:{className:o["appointment-form_input-wrapper"]},children:[n]}),a,i,p]}),s=Number(((new Date).getTime()/1e3).toFixed(0)),l=this.application.timeExpires-s,c=setInterval((function(){l<=0?(p.addEventListener("click",(function(a){a.preventDefault(),t.application.sendConfirmCode(e)})),clearInterval(c)):(l--,p.textContent="".concat(BX.message("FIRSTBIT_JS_CONFIRM_CODE_SEND_AGAIN")," \n                                         ").concat(l>0?l:""))}),1e3);return r}}]),e}(),r="phone",s="email",l="birthday";function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){babelHelpers.defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,p=!0,r=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return p=e.done,e},e:function(e){r=!0,i=e},f:function(){try{p||null==a.return||a.return()}finally{if(r)throw i}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}var u=function(){function e(t){var a,n,i,r,s,l,c,d,_,m,u,h,f,v,y,g,b,B,x,I,k,N,T,S,w,E;babelHelpers.classCallCheck(this,e),babelHelpers.defineProperty(this,"step",""),babelHelpers.defineProperty(this,"phoneMask","+7(000)000-00-00"),babelHelpers.defineProperty(this,"loaded",!1),babelHelpers.defineProperty(this,"timeExpires",0),babelHelpers.defineProperty(this,"requiredInputs",[]),babelHelpers.defineProperty(this,"initParams",{}),babelHelpers.defineProperty(this,"eventHandlersAdded",{}),babelHelpers.defineProperty(this,"dataKeys",{clinicsKey:"clinic",specialtiesKey:"specialty",employeesKey:"doctor",servicesKey:"service",scheduleKey:"schedule"}),babelHelpers.defineProperty(this,"data",{clinics:[],employees:{},services:{},schedule:[]}),babelHelpers.defineProperty(this,"selectionBlocks",{}),babelHelpers.defineProperty(this,"selectionNodes",{}),babelHelpers.defineProperty(this,"textNodes",{}),babelHelpers.defineProperty(this,"defaultText",{}),babelHelpers.defineProperty(this,"isUpdate",!1),this.firstInit=!0,this.initParams=t,this.selectors=this.getAppSelectors(o),this.selectionSteps=Object.values(this.dataKeys),this.useServices="Y"===t.useServices,this.selectDoctorBeforeService="Y"===t.selectDoctorBeforeService,this.useTimeSteps="Y"===t.useTimeSteps,this.timeStepDurationMinutes=Number(t.timeStepDurationMinutes),this.strictCheckingOfRelations="Y"===t.strictCheckingOfRelations,this.showDoctorsWithoutDepartment="Y"===t.showDoctorsWithoutDepartment,this.confirmTypes=t.confirmTypes,this.useConfirmWith=t.useConfirmWith,this.useEmailNote="Y"===t.useEmailNote,this.useCustomMainBtn="Y"===t.useCustomMainBtn,this.customColors=null!==(a=t.customColors)&&void 0!==a?a:{},this.filledInputs=(E={},babelHelpers.defineProperty(E,this.dataKeys.clinicsKey,{clinicUid:!1,clinicName:!1}),babelHelpers.defineProperty(E,this.dataKeys.specialtiesKey,{specialty:!1,specialtyUid:!1}),babelHelpers.defineProperty(E,this.dataKeys.servicesKey,{serviceUid:!1,serviceName:!1,serviceDuration:!1}),babelHelpers.defineProperty(E,this.dataKeys.employeesKey,{refUid:!1,doctorName:!1}),babelHelpers.defineProperty(E,this.dataKeys.scheduleKey,{orderDate:!1,timeBegin:!1,timeEnd:!1}),babelHelpers.defineProperty(E,"textValues",{name:null!==(n=null===(i=this.filledInputs)||void 0===i||null===(r=i.textValues)||void 0===r?void 0:r.name)&&void 0!==n&&n,surname:null!==(s=null===(l=this.filledInputs)||void 0===l||null===(c=l.textValues)||void 0===c?void 0:c.surname)&&void 0!==s&&s,middleName:null!==(d=null===(_=this.filledInputs)||void 0===_||null===(m=_.textValues)||void 0===m?void 0:m.middleName)&&void 0!==d&&d,phone:null!==(u=null===(h=this.filledInputs)||void 0===h||null===(f=h.textValues)||void 0===f?void 0:f.phone)&&void 0!==u&&u,address:null!==(v=null===(y=this.filledInputs)||void 0===y||null===(g=y.textValues)||void 0===g?void 0:g.address)&&void 0!==v&&v,email:null!==(b=null===(B=this.filledInputs)||void 0===B||null===(x=B.textValues)||void 0===x?void 0:x.email)&&void 0!==b&&b,birthday:null!==(I=null===(k=this.filledInputs)||void 0===k||null===(N=k.textValues)||void 0===N?void 0:N.birthday)&&void 0!==I&&I,comment:null!==(T=null===(S=this.filledInputs)||void 0===S||null===(w=S.textValues)||void 0===w?void 0:w.comment)&&void 0!==T&&T}),E),this.prepareSelectionBlocksForRender(),this.renderer=new p(o,this)}var t;return babelHelpers.createClass(e,[{key:"prepareSelectionBlocksForRender",value:function(){var e=this;this.selectionSteps.forEach((function(t){e.selectionBlocks[t]={blockId:"app_".concat(t,"_block"),listId:"app_".concat(t,"_list"),selectedId:"app_".concat(t,"_selected"),inputId:"app_".concat(t,"_value"),isRequired:!(t===e.dataKeys.servicesKey&&"Y"!==e.initParams.useServices)},e.defaultText[t]=BX.message("FIRSTBIT_JS_APPOINTMENT_SELECT_".concat(t.toUpperCase(),"_TEXT"))}))}},{key:"run",value:function(){this.checkRoot(),this.insertAppHtml(),this.init()}},{key:"checkRoot",value:function(){this.root&&BX.type.isDomNode(this.root)?BX.cleanNode(this.root):(this.root=this.renderer.getDivElement(this.selectors.rootNodeId),BX.append(this.root,document.body))}},{key:"insertAppHtml",value:function(){BX.append(this.renderer.getAppHtmlSkeleton(),this.root),!this.useCustomMainBtn&&BX.append(this.renderer.getDefaultStartBtn(),this.root)}},{key:"init",value:function(){try{this.initCustomEvents(),this.initStartBtn(),this.initBaseNodes(),this.initOverlayAction(),this.initForm(),this.initMobileCloseBtn(),this.initSelectionNodes(),this.initTextNodes(),this.addPhoneMasks(),this.addCalendarSelection(),this.addCustomColors()}catch(e){this.logResultErrors(e)}}},{key:"initCustomEvents",value:function(){var e=this;i.subscribe(i.fullDataLoaded,(function(){e.startRender()}))}},{key:"initStartBtn",value:function(){if(this.firstInit||!this.useCustomMainBtn){var e=this.useCustomMainBtn?this.initParams.customMainBtnId:this.selectors.startBtnId;if(this.startBtn=BX(e),!BX.type.isDomNode(this.startBtn))throw new Error("".concat(BX.message("FIRSTBIT_JS_NODE_NOT_FOUND"),' "').concat(this.initParams.customMainBtnId,'"'));i.bind(this.startBtn,"click",this.togglePopup.bind(this))}}},{key:"initBaseNodes",value:function(){this.overlay=BX(this.selectors.overlayId),this.startBtnWrap=BX(this.selectors.startBtnWrapId),this.mobileCloseBtn=BX(this.selectors.mobileCloseBtnId),this.messageNode=BX(this.selectors.messageNodeId),this.submitBtn=BX(this.selectors.submitBtnId),this.resultBlock=BX(this.selectors.appResultBlockId)}},{key:"initOverlayAction",value:function(){var e=this;BX.type.isDomNode(this.overlay)&&i.bind(this.overlay,"click",(function(t){var a;(null===(a=t.target)||void 0===a?void 0:a.getAttribute("id"))===e.selectors.overlayId&&e.togglePopup()}))}},{key:"initForm",value:function(){if(this.form=BX(this.selectors.formId),!this.form)throw new Error("".concat(BX.message("FIRSTBIT_JS_NODE_NOT_FOUND")," ").concat(this.selectors.formId));i.bind(this.form,"submit",this.submit.bind(this))}},{key:"initMobileCloseBtn",value:function(){if(!this.mobileCloseBtn)throw new Error("".concat(BX.message("FIRSTBIT_JS_NODE_NOT_FOUND")," ").concat(this.selectors.mobileCloseBtnId));i.bind(this.mobileCloseBtn,"click",this.togglePopup.bind(this))}},{key:"initSelectionNodes",value:function(){for(var e in this.selectionBlocks)this.selectionBlocks.hasOwnProperty(e)&&(this.selectionNodes[e]={blockNode:BX(this.selectionBlocks[e].blockId),listNode:BX(this.selectionBlocks[e].listId),selectedNode:BX(this.selectionBlocks[e].selectedId),inputNode:BX(this.selectionBlocks[e].inputId)},this.selectionBlocks[e].isRequired&&this.requiredInputs.push(this.selectionNodes[e].inputNode))}},{key:"initTextNodes",value:function(){var e=this;this.initParams.textBlocks.forEach((function(t){var a=BX(t.id);if(!a)throw new Error("".concat(BX.message("FIRSTBIT_JS_NODE_NOT_FOUND")," ").concat(t.id));var o=e.filledInputs.textValues[t.name];if(a.value=o||"",a&&o&&t.name===l){var n=new Date(o);a.value=e.convertDateToDisplay(n.getTime(),!1,!0)}i.bind(a,"input",(function(a){var o,n=null!==(o=a.target.value)&&void 0!==o?o:"";a.target.name===r&&n.length>e.phoneMask.length&&(n=n.substring(0,e.phoneMask.length)),e.filledInputs.textValues[t.name]=n})),("true"===t["data-required"]||e.useConfirmWith===e.confirmTypes.email&&t.name===s)&&e.requiredInputs.push(a),e.textNodes[t.name]={inputNode:a}}))}},{key:"start",value:function(){var e=this;this.toggleLoader(!0),this.loadData().then((function(){e.loaded=!0})).catch((function(t){!e.useCustomMainBtn&&e.startBtnWrap.classList.add(o.hidden),e.logResultErrors(t)}))}},{key:"loadData",value:(t=babelHelpers.asyncToGenerator(regeneratorRuntime.mark((function e(){var t,a,o,n,p,r,s,l,c,d,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getListClinic();case 2:if(a=e.sent,null===(t=a.data)||void 0===t||!t.error){e.next=7;break}return e.abrupt("return",Promise.reject(null===(o=a.data)||void 0===o?void 0:o.error));case 7:if(!((null===(n=a.data)||void 0===n?void 0:n.length)>0)){e.next=34;break}return this.data.clinics=a.data,e.next=11,this.getListEmployees();case 11:if(r=e.sent,null===(p=r.data)||void 0===p||!p.error){e.next=16;break}return e.abrupt("return",Promise.reject(null===(s=r.data)||void 0===s?void 0:s.error));case 16:if(!(Object.keys(r.data).length>0)){e.next=31;break}return this.data.employees=r.data,e.next=20,this.getSchedule();case 20:if(c=e.sent,null===(l=c.data)||void 0===l||!l.error){e.next=25;break}return e.abrupt("return",Promise.reject(null===(d=c.data)||void 0===d?void 0:d.error));case 25:if(null===(_=c.data)||void 0===_||!_.hasOwnProperty("schedule")){e.next=29;break}return this.data.schedule=c.data.schedule,i.emit(i.fullDataLoaded),e.abrupt("return",Promise.resolve());case 29:e.next=32;break;case 31:return e.abrupt("return",Promise.reject(BX.message("FIRSTBIT_JS_DOCTORS_NOT_FOUND_ERROR")));case 32:e.next=35;break;case 34:return e.abrupt("return",Promise.reject(BX.message("FIRSTBIT_JS_CLINICS_NOT_FOUND_ERROR")));case 35:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getListClinic",value:function(){return BX.ajax.runAction("firstbit:appointment.oneCController.getClinics",{data:{sessid:BX.bitrix_sessid()}})}},{key:"getListEmployees",value:function(){return BX.ajax.runAction("firstbit:appointment.oneCController.getEmployees",{data:{sessid:BX.bitrix_sessid()}})}},{key:"getSchedule",value:function(){return BX.ajax.runAction("firstbit:appointment.oneCController.getSchedule",{data:{sessid:BX.bitrix_sessid()}})}},{key:"getListNomenclature",value:function(e){return BX.ajax.runAction("firstbit:appointment.oneCController.getNomenclature",{data:{sessid:BX.bitrix_sessid(),clinicGuid:e}})}},{key:"startRender",value:function(){var e=this;if(!this.renderClinicList())throw new Error(BX.message("FIRSTBIT_JS_CLINICS_RENDER_ERROR"));if("Y"===this.isUpdate){for(var t in this.filledInputs)this.filledInputs.hasOwnProperty(t)&&this.selectionNodes.hasOwnProperty(t)&&(this.filledInputs[t]=JSON.parse(this.selectionNodes[t].inputNode.value));this.renderSpecialtiesList(),this.renderEmployeesList(),this.renderScheduleList()}setTimeout((function(){e.toggleLoader(!1)}),300)}},{key:"renderClinicList",value:function(){if(!this.data.clinics.length)throw new Error(BX.message("FIRSTBIT_JS_CLINICS_NOT_FOUND_ERROR"));if(!this.selectionNodes.hasOwnProperty(this.dataKeys.clinicsKey))throw new Error(BX.message("FIRSTBIT_JS_CLINICS_NODE_NOT_FOUND_ERROR"));var e=this.selectionNodes[this.dataKeys.clinicsKey].listNode;return BX.cleanNode(e),this.data.clinics.forEach((function(t){if(!t.uid)throw new Error("".concat(BX.message("FIRSTBIT_JS_OBJECT_UID_ERROR")," ").concat(t.name));BX.append(BX.create("li",{dataset:{uid:t.uid,name:t.name},text:t.name}),e)})),this.addItemActions(this.dataKeys.clinicsKey),!0}},{key:"renderSpecialtiesList",value:function(){if(!this.selectionNodes.hasOwnProperty(this.dataKeys.specialtiesKey))throw new Error(BX.message("FIRSTBIT_JS_SPECIALTIES_NODE_NOT_FOUND_ERROR"));var e=this.selectionNodes[this.dataKeys.specialtiesKey].listNode;if(BX.cleanNode(e),Object.keys(this.data.employees).length>0){for(var t in this.data.employees)if(this.data.employees.hasOwnProperty(t)){var a=this.filledInputs[this.dataKeys.clinicsKey].clinicUid===this.data.employees[t].clinicUid,n=!0;if(this.strictCheckingOfRelations&&(n=a,this.showDoctorsWithoutDepartment&&(n=a||!this.data.employees[t].clinicUid)),n&&this.data.employees[t].specialty){var i=this.data.employees[t].specialty,p=this.createIdFromName(i);e.querySelector('[data-uid="'.concat(p,'"]'))||BX.append(BX.create("li",{dataset:{uid:p,name:i},text:i}),e)}}0===e.children.length&&BX.append(BX.create("span",{attrs:{className:o["empty-selection-message"]},text:BX.message("FIRSTBIT_JS_SPECIALTIES_NOT_FOUND_ERROR")}),e),this.addItemActions(this.dataKeys.specialtiesKey)}}},{key:"renderServicesList",value:function(){if(!this.selectionNodes.hasOwnProperty(this.dataKeys.servicesKey))throw new Error(BX.message("FIRSTBIT_JS_SERVICES_NODE_NOT_FOUND_ERROR"));var e=this.selectionNodes[this.dataKeys.servicesKey].listNode;if(BX.cleanNode(e),Object.keys(this.data.services).length>0){for(var t in this.data.services){this.data.services.hasOwnProperty(t);var a=this.filledInputs[this.dataKeys.specialtiesKey].specialtyUid===this.data.services[t].specialtyUid;if(this.selectDoctorBeforeService){var n=this.filledInputs[this.dataKeys.employeesKey].refUid;a=a&&this.data.employees[n].services.hasOwnProperty(t)}if(a){var i=Number(this.data.services[t].price.replace(/\s+/g,""));this.data.services.hasOwnProperty(t)&&BX.append(BX.create("li",{dataset:{uid:t,duration:this.data.services[t].duration},children:[BX.create("p",{html:"".concat(this.data.services[t].name,"<br>\n                                                ").concat(i>0?"<b>"+i+"</b>&#8381;":"")})]}),e)}}0===e.children.length&&BX.append(BX.create("span",{attrs:{className:o["empty-selection-message"]},text:BX.message("FIRSTBIT_JS_SERVICES_NOT_FOUND_ERROR")}),e),this.addItemActions(this.dataKeys.servicesKey)}}},{key:"renderEmployeesList",value:function(){if(!this.selectionNodes.hasOwnProperty(this.dataKeys.employeesKey))throw new Error(BX.message("FIRSTBIT_JS_DOCTORS_NODE_NOT_FOUND_ERROR"));var e=this.selectionNodes[this.dataKeys.employeesKey].listNode;if(e.innerHTML="",Object.keys(this.data.employees).length>0){for(var t in this.data.employees)if(this.data.employees.hasOwnProperty(t)){var a=this.filledInputs[this.dataKeys.specialtiesKey].specialty,n=this.filledInputs[this.dataKeys.clinicsKey].clinicUid,i=this.data.employees[t].specialty===a,p=n===this.data.employees[t].clinicUid,r=i;if(this.strictCheckingOfRelations&&(r=this.showDoctorsWithoutDepartment&&i&&!this.data.employees[t].clinicUid||i&&p),r){if(this.useServices&&!this.selectDoctorBeforeService){var s=this.filledInputs[this.dataKeys.servicesKey].serviceUid;if(!this.data.employees[t].services.hasOwnProperty(s))continue}BX.append(BX.create("li",{dataset:{uid:t},text:"".concat(this.data.employees[t].surname," ").concat(this.data.employees[t].name," ").concat(this.data.employees[t].middleName)}),e)}}0===e.children.length&&BX.append(BX.create("span",{attrs:{className:o["empty-selection-message"]},text:BX.message("FIRSTBIT_JS_DOCTORS_PARAMS_NOT_FOUND_ERROR")}),e),this.addItemActions(this.dataKeys.employeesKey)}}},{key:"renderScheduleList",value:function(){var e=this;if(!this.data.schedule.length)throw new Error(BX.message("FIRSTBIT_JS_SCHEDULE_NOT_FOUND_ERROR"));var t=this.selectionNodes[this.dataKeys.scheduleKey].listNode;t.classList.add(o["column-mode"]),BX.cleanNode(t),this.data.schedule.forEach((function(a){if(a.clinicUid===e.filledInputs[e.dataKeys.clinicsKey].clinicUid&&a.refUid===e.filledInputs[e.dataKeys.employeesKey].refUid){var n=e.data.employees[a.refUid],i=e.filledInputs[e.dataKeys.servicesKey],p=Number(i.serviceDuration);if(n.services.hasOwnProperty(i.serviceUid)&&n.services[i.serviceUid].hasOwnProperty("personalDuration")){var r=n.services[i.serviceUid].personalDuration;p=Number(r)>0?Number(r):p}var s=e.useServices&&p>0,l=s?"freeNotFormatted":"free";if(a.timetable[l].length){var c,d=a.timetable[l];if(s){var _=e.getIntervalsForServiceDuration(d,1e3*p);if(0===_.length)return void BX.append(BX.create("span",{attrs:{className:o["empty-selection-message"]},text:BX.message("FIRSTBIT_JS_SCHEDULE_FREE_TIME_NOT_FOUND")}),t);d=_}var m=void 0;d.forEach((function(a,o){var n=o===d.length-1;(a.date!==c||n)&&(m&&t.append(m),n&&1!==d.length||(m=e.createDayColumn(a)),c=a.date),m&&BX.append(BX.create("span",{dataset:{displayDate:"".concat(a.formattedDate," "),date:a.date,start:a.timeBegin,end:a.timeEnd},text:"".concat(a.formattedTimeBegin)}),m)}))}else BX.append(BX.create("span",{attrs:{className:o["empty-selection-message"]},text:BX.message("FIRSTBIT_JS_SCHEDULE_FREE_TIME_NOT_FOUND")}),t)}})),0===t.children.length&&BX.append(BX.create("span",{attrs:{className:o["empty-selection-message"]},text:BX.message("FIRSTBIT_JS_SCHEDULE_FREE_TIME_NOT_FOUND")}),t),this.addHorizontalScrollButtons(),this.addItemActions(this.dataKeys.scheduleKey)}},{key:"getIntervalsForServiceDuration",value:function(e,t){var a=this,o=[];return e.length&&e.forEach((function(e){var n=new Date(e.timeBegin).getTime(),i=new Date(e.timeEnd).getTime(),p=i-n,r=Math.floor(p/t);if(r>0)if(a.useTimeSteps&&t>=18e5)for(var s=new Date(n),l=new Date(n+t);l.getTime()<=i;)o.push({date:e.date,timeBegin:a.convertDateToISO(Number(s)),timeEnd:a.convertDateToISO(Number(l)),formattedDate:a.convertDateToDisplay(Number(s),!1),formattedTimeBegin:a.convertDateToDisplay(Number(s),!0),formattedTimeEnd:a.convertDateToDisplay(Number(l),!0)}),s.setMinutes(s.getMinutes()+a.timeStepDurationMinutes),l.setMinutes(l.getMinutes()+a.timeStepDurationMinutes);else for(var c=0;c<r;c++){var d=Number(new Date(n+t*c)),_=Number(new Date(n+t*(c+1)));o.push({date:e.date,timeBegin:a.convertDateToISO(d),timeEnd:a.convertDateToISO(_),formattedDate:a.convertDateToDisplay(d,!1),formattedTimeBegin:a.convertDateToDisplay(d,!0),formattedTimeEnd:a.convertDateToDisplay(_,!0)})}})),o}},{key:"createDayColumn",value:function(e){var t=this.readDateInfo(e.timeBegin);return BX.create("li",{children:[BX.create("p",{text:"".concat(t.weekDay,"\n                        ").concat(e.formattedDate)})]})}},{key:"addHorizontalScrollButtons",value:function(){var e=this.selectionNodes[this.dataKeys.scheduleKey].listNode,t=e.querySelector("li");if(e&&t){var a=e.querySelector("li").clientWidth;BX.append(BX.create("div",{attrs:{className:o["horizontal-scroll-buttons"]},children:[BX.create("button",{attrs:{type:"button"},text:"<",events:{click:function(){0!==e.scrollLeft?e.scrollBy({left:3*-a,top:0,behavior:"smooth"}):e.scrollTo({left:e.scrollWidth,top:0,behavior:"smooth"})}}}),BX.create("button",{attrs:{type:"button"},text:">",events:{click:function(){e.scrollLeft<e.scrollWidth-3*a-10?e.scrollBy({left:3*a,top:0,behavior:"smooth"}):e.scrollTo({left:0,top:0,behavior:"smooth"})}}})]}),e)}}},{key:"toggleSelectionList",value:function(e,t,a){for(var n in a.classList.toggle(o.active),this.selectionNodes)this.selectionNodes.hasOwnProperty(n)&&n!==e&&this.selectionNodes[n].listNode.classList.remove(o.active)}},{key:"addItemActions",value:function(e){var t=this,a=this.selectionNodes[e].listNode.children;if(a.length){var n,i=_(a);try{for(i.s();!(n=i.n()).done;){var p=n.value;if(e===this.dataKeys.scheduleKey){var r=p.querySelectorAll("span");r.length&&r.forEach((function(a){a.addEventListener("click",(function(a){a.stopPropagation(),t.selectionNodes[e].listNode.classList.remove(o.active),t.selectionNodes[e].selectedNode.innerHTML="\n                            <span>\n                                ".concat(a.currentTarget.dataset.displayDate," - \n                                ").concat(a.currentTarget.textContent,"\n                            </span>\n                        "),t.changeStep(e,a.currentTarget),t.activateBlocks()}))}))}else p.addEventListener("click",(function(a){a.stopPropagation(),t.selectionNodes[e].listNode.classList.remove(o.active),t.selectionNodes[e].selectedNode.innerHTML="<span>".concat(a.currentTarget.textContent,"</span>"),t.changeStep(e,a.currentTarget),t.activateBlocks()}))}}catch(e){i.e(e)}finally{i.f()}}}},{key:"changeStep",value:function(e,t){var a=this;switch(this.selectionNodes[e].inputNode.value=t.dataset.uid,e){case this.dataKeys.clinicsKey:this.filledInputs[e].clinicUid=t.dataset.uid,this.filledInputs[e].clinicName=t.dataset.name,this.useServices&&(this.form.classList.add(o.loading),this.getListNomenclature("".concat(t.dataset.uid)).then((function(e){var t;if(null!==(t=e.data)&&void 0!==t&&t.error)throw new Error(e.data.error);Object.keys(e.data).length>0&&(a.data.services=e.data,a.bindServicesToSpecialties()),a.form.classList.remove(o.loading)})).catch((function(e){a.logResultErrors(e)}))),this.renderSpecialtiesList();break;case this.dataKeys.specialtiesKey:this.filledInputs[e].specialty=t.textContent,this.filledInputs[e].specialtyUid=t.dataset.uid,this.useServices?this.selectDoctorBeforeService?this.renderEmployeesList():this.renderServicesList():this.renderEmployeesList();break;case this.dataKeys.servicesKey:this.filledInputs[e].serviceName=t.textContent,this.filledInputs[e].serviceUid=t.dataset.uid,this.filledInputs[e].serviceDuration=t.dataset.duration,this.selectDoctorBeforeService?this.renderScheduleList():this.renderEmployeesList();break;case this.dataKeys.employeesKey:this.filledInputs[e].doctorName=t.textContent,this.filledInputs[e].refUid=t.dataset.uid,this.useServices&&this.selectDoctorBeforeService?this.renderServicesList():this.renderScheduleList();break;case this.dataKeys.scheduleKey:this.filledInputs[e].orderDate=t.dataset.date,this.filledInputs[e].timeBegin=t.dataset.start,this.filledInputs[e].timeEnd=t.dataset.end,this.selectionNodes[e].inputNode.value=t.dataset.date}this.step=e}},{key:"bindServicesToSpecialties",value:function(){var e=this.data.services,t=this.data.employees;if(Object.keys(t).length>0)for(var a in t){if(!t.hasOwnProperty(a))return;var o=t[a].services;if(o&&Object.keys(o).length>0)for(var n in o){if(!o.hasOwnProperty(n))return;if(e.hasOwnProperty(n)){var i=t[a].specialty;i&&(e[n].specialtyUid=this.createIdFromName(i))}}}}},{key:"activateBlocks",value:function(){var e=!1,t=!1;for(var a in this.selectionNodes)if((this.useServices||a!==this.dataKeys.servicesKey)&&this.selectionNodes.hasOwnProperty(a)){var n=this.selectionNodes[a].blockNode;e||t?e&&!t?(n.classList.remove(o.hidden),this.resetValue(a)):(n.classList.add(o.hidden),this.resetValue(a)):n.classList.remove(o.hidden),t=e,a===this.step&&(e=!0)}}},{key:"resetValue",value:function(e){if(this.selectionNodes[e].selectedNode.textContent=this.defaultText[e],this.selectionNodes[e].inputNode.value="",this.filledInputs.hasOwnProperty(e))for(var t in this.filledInputs[e])this.filledInputs[e].hasOwnProperty(t)&&(this.filledInputs[e][t]=!1)}},{key:"submit",value:function(e){if(e.preventDefault(),this.checkRequiredFields()){this.messageNode&&(this.messageNode.textContent=""),this.form.classList.add(o.loading);var t=d({},this.filledInputs.textValues);for(var a in this.selectionNodes)this.selectionNodes.hasOwnProperty(a)&&this.filledInputs.hasOwnProperty(a)&&(this.selectionNodes[a].inputNode.value=JSON.stringify(this.filledInputs[a]),t=d(d({},t),this.filledInputs[a]));this.useConfirmWith!==this.confirmTypes.none?this.sendConfirmCode(t):this.sendOrder(t)}else this.messageNode?this.messageNode.textContent=BX.message("FIRSTBIT_JS_ORDER_CHECK_FIELDS_ERROR"):this.logResultErrors(BX.message("FIRSTBIT_JS_ORDER_CHECK_FIELDS_ERROR"))}},{key:"sendConfirmCode",value:function(e){var t=this;this.messageNode.textContent="",BX.ajax.runAction("firstbit:appointment.messageController.sendConfirmCode",{data:{phone:e.phone,email:e.email,sessid:BX.bitrix_sessid()}}).then((function(a){var o,n;t.timeExpires=null!==(o=null===(n=a.data)||void 0===n?void 0:n.timeExpires)&&void 0!==o?o:((new Date).getTime()/1e3).toFixed(0)+60,t.createConfirmationForm(e)})).catch((function(e){var a,o;t.messageNode.textContent=(null===(a=e.errors)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.message)+BX.message("FIRSTBIT_JS_SOME_DISPLAY_ERROR_POSTFIX"),t.logResultErrors(e)}))}},{key:"createConfirmationForm",value:function(e){this.confirmWrapper&&this.confirmWrapper.remove(),this.confirmWrapper=this.renderer.getConfirmationBlock(e),this.form.classList.add(o["appointment-form-confirmation-mode"]),BX.insertBefore(this.confirmWrapper,this.submitBtn.closest("div"))}},{key:"verifyConfirmCode",value:function(e,t,a,n){var i=this;n.classList.add(o.loading),BX.ajax.runAction("firstbit:appointment.messageController.verifyConfirmCode",{data:{code:e,email:t.email,sessid:BX.bitrix_sessid()}}).then((function(){return i.sendOrder(t)})).catch((function(e){var t;n.classList.remove(o.loading),(null===(t=e.errors)||void 0===t?void 0:t.length)>0&&e.errors.forEach((function(e){a.innerHTML=400===Number(e.code)||406===Number(e.code)||425===Number(e.code)?"".concat(a.innerHTML).concat(e.message,"<br>"):BX.message("FIRSTBIT_JS_APPLICATION_ERROR")}))}))}},{key:"sendOrder",value:function(e){var t=this;BX.ajax.runAction("firstbit:appointment.oneCController.addOrder",{data:{params:JSON.stringify(e),sessid:BX.bitrix_sessid()}}).then((function(a){var n;t.confirmWrapper&&t.confirmWrapper.remove(),t.form.classList.remove(o["appointment-form-confirmation-mode"],o.loading),null!==(n=a.data)&&void 0!==n&&n.error?(t.logResultErrors(a.data.error),t.finalizingWidget(!1)):(t.useEmailNote&&e.email&&t.sendEmailNote(e),t.finalizingWidget(!0))})).catch((function(e){return t.logResultErrors(e)}))}},{key:"sendEmailNote",value:function(e){BX.ajax.runAction("firstbit:appointment.messageController.sendEmailNote",{data:{params:JSON.stringify(e),sessid:BX.bitrix_sessid()}}).then().catch()}},{key:"finalizingWidget",value:function(e){var t=this;this.resultBlock.classList.add(o.active),this.form.classList.add(o.off);var a=this.resultBlock.querySelector("p");if(a)if(e){var n=this.convertDateToDisplay(this.filledInputs[this.dataKeys.scheduleKey].timeBegin,!1),i=this.convertDateToDisplay(this.filledInputs[this.dataKeys.scheduleKey].timeBegin,!0),p=this.filledInputs[this.dataKeys.employeesKey].doctorName;a.innerHTML="".concat(BX.message("FIRSTBIT_JS_APPOINTMENT_SUCCESS"),"\n                                         <br>").concat(n," ").concat(i,"\n                                         <br>").concat(BX.message("FIRSTBIT_JS_APPOINTMENT_DOCTOR")," - ").concat(p),a.classList.add(o.success),this.finalAnimations()}else a.append(this.createFinalError()),a.classList.add(o.error),setTimeout((function(){t.reload()}),5e3)}},{key:"finalAnimations",value:function(){var e=this;this.startBtn.classList.remove(o.active),this.startBtn.classList.add(o.success),setTimeout((function(){e.reload()}),4e3)}},{key:"reload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&e.preventDefault(),this.overlay.classList.remove(o.active),this.firstInit=!1,this.loaded=!1,setTimeout(this.run.bind(this),500)}},{key:"createFinalError",value:function(){var e=this;return BX.create("p",{children:[BX.create("span",{html:BX.message("FIRSTBIT_JS_APPOINTMENT_FINAL_ERROR_START")}),BX.create("a",{attrs:{href:"#"},text:BX.message("FIRSTBIT_JS_APPOINTMENT_FINAL_ERROR_LINK"),events:{click:function(t){return e.reload(t)}}}),BX.create("span",{html:BX.message("FIRSTBIT_JS_APPOINTMENT_FINAL_ERROR_END")})]})}},{key:"checkRequiredFields",value:function(){var e=!0;return this.requiredInputs.length>0&&this.requiredInputs.some((function(t){var a,n;if(!BX.type.isNotEmptyString(t.value))return e=!1,null===(a=t.parentElement)||void 0===a||a.classList.add(o.error),!0;null===(n=t.parentElement)||void 0===n||n.classList.remove(o.error)})),e&&this.phoneIsValid(this.textNodes.phone.inputNode)}},{key:"phoneIsValid",value:function(e){var t=e.value,a=!(!t||t.length!==this.phoneMask.length);return null!==e.parentElement&&(a?e.parentElement.classList.remove(o.error):e.parentElement.classList.add(o.error)),a}},{key:"addPhoneMasks",value:function(){var e=this,t=this.overlay.querySelectorAll('input[type="tel"]'),a=this;t.length&&t.forEach((function(t){t.addEventListener("input",(function(t){a.maskInput(t.currentTarget,e.phoneMask)}))}))}},{key:"addCalendarSelection",value:function(){var e=this,t=this.overlay.querySelector('input[name="birthday"]');t.addEventListener("keydown",(function(e){return e.preventDefault(),!1})),t.addEventListener("click",(function(){BX.calendar({node:t,field:t,bTime:!1,callback_after:function(t){var a=new Date(t).getTime();e.filledInputs.textValues.birthday=e.convertDateToISO(a)}})}))}},{key:"addCustomColors",value:function(){if(Object.keys(this.customColors).length>0){var e=BX.create("style");for(var t in e.textContent=".".concat(o["appointment-popup-overlay"],", .").concat(o["appointment-button-wrapper"],"{"),this.customColors)if(this.customColors.hasOwnProperty(t))switch(t){case"--appointment-main-color":var a=n(this.customColors[t]);a&&(e.textContent+="--main-h: ".concat(a.h,";--main-s: ").concat(a.s,";--main-l: ").concat(a.l,";"));break;case"--appointment-field-color":var i=n(this.customColors[t]);i&&(e.textContent+="-field-h: ".concat(i.h,";--field-s: ").concat(i.s,";--field-l: ").concat(i.l,";"));break;default:e.textContent+="".concat(t,": ").concat(this.customColors[t],";")}e.textContent=e.textContent+"}",this.overlay.after(e)}}},{key:"togglePopup",value:function(){this.overlay.classList.toggle(o.active),this.useCustomMainBtn?this.startBtn.classList.toggle("active"):this.startBtn.classList.toggle(o.active),this.loaded||this.start()}},{key:"toggleLoader",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?this.form.classList.add(o.loading):this.form.classList.remove(o.loading)}},{key:"maskInput",value:function(e,t){for(var a=e.value,o=/[0]/,n=/[0-9]/,i="",p=0,r=0;r<t.length&&!(r>=a.length)&&("0"!==t[r]||n.test(a[p]));r++){for(;!o.test(t[r])&&a[p]!==t[r];)i+=t[r++];i+=a[p++]}e.value=i}},{key:"convertDateToISO",value:function(e){var t=this.readDateInfo(e);return"".concat(t.year,"-").concat(t.month,"-").concat(t.day,"T").concat(t.hours,":").concat(t.minutes,":00")}},{key:"convertDateToDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.readDateInfo(e);return t?"".concat(o.hours,":").concat(o.minutes):a?"".concat(o.day,".").concat(o.month,".").concat(o.year):"".concat(o.day,"-").concat(o.month,"-").concat(o.year)}},{key:"readDateInfo",value:function(e){var t=new Date(e),a="".concat(t.getDate());Number(a)<10&&(a="0".concat(a));var o="".concat(t.getMonth()+1);Number(o)<10&&(o="0".concat(o));var n="".concat(t.getHours());Number(n)<10&&(n="0".concat(n));var i="".concat(t.getMinutes());Number(i)<10&&(i="0".concat(i));var p="".concat(t.getSeconds());return Number(p)<10&&(p="0".concat(p)),{day:a,month:o,year:t.getFullYear(),hours:n,minutes:i,seconds:p,weekDay:this.ucFirst(t.toLocaleString("ru",{weekday:"short"}))}}},{key:"createIdFromName",value:function(e){return window.btoa(window.unescape(encodeURIComponent(e)))}},{key:"ucFirst",value:function(e){return e?e[0].toUpperCase()+e.slice(1):e}},{key:"logResultErrors",value:function(e){var t;e.errors&&Array.isArray(e.errors)&&e.errors.length>0?e.errors.forEach((function(e){console.log("".concat(BX.message("FIRSTBIT_JS_APPLICATION_ERROR")," - ").concat(e.message))})):console.log(BX.message("FIRSTBIT_JS_APPLICATION_ERROR")+"\r\n",null!==(t=e.message)&&void 0!==t?t:e)}},{key:"getAppSelectors",value:function(e){return{rootNodeId:"firstbit-appointment-application-root",overlayId:"appointment-popup-steps-overlay",startBtnWrapId:e["appointment-button-wrapper"],startBtnId:e["appointment-button"],formId:e["appointment-form"],mobileCloseBtnId:e["appointment-form-close"],messageNodeId:e["appointment-form-message"],submitBtnId:e["appointment-form-button"],appResultBlockId:e["appointment-result-block"],inputClass:e["appointment-form_input"],textareaClass:e["appointment-form_textarea"],confirmWrapperId:e["appointment-form-confirmation-wrapper"]}}}]),e}();BX.ajax.runComponentAction("firstbit:appointment.add","getResult",{mode:"ajax",data:{sessid:BX.bitrix_sessid()}}).then((function(e){var t=BX.namespace("FirstBit.Appointment");t.AppointmentSteps=new u(e.data),t.AppointmentSteps.run()})).catch((function(e){if(e.errors&&BX.type.isArray(e.errors)){var t="";response.errors.forEach((function(e){t="".concat(t," ").concat(e.code," - ").concat(e.message,";")})),console.log(t)}else console.log("app data loading error",e)}))}(this.BX.FirstBit.Appointment=this.BX.FirstBit.Appointment||{},BX,BX);
//# sourceMappingURL=bx_popup.bundle.js.map
